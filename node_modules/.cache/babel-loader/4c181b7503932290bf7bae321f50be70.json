{"ast":null,"code":"import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nconst initialState = {\n  user: null,\n  isError: false,\n  isSuccess: false,\n  isLoading: false,\n  message: \"\"\n}; //request ke api\n\nexport const LoginUser = createAsyncThunk(\"user/loginUser\", async (user, thunkAPI) => {\n  try {\n    const response = await axios.post(\"http://localhost:5000/login\", {\n      email: user.username,\n      password: user.password\n    });\n    return response.data;\n  } catch (error) {\n    if (error.response) {\n      const message = error.response.data.msg;\n      return thunkAPI.rejectWithValue(message);\n    }\n  }\n}); // method untuk fungsi getme\n\nexport const getMe = createAsyncThunk(\"user/getMe\", async (_, thunkAPI) => {\n  try {\n    const response = await axios.get(\"http://localhost:5000/me\");\n    return response.data;\n  } catch (error) {\n    if (error.response) {\n      const message = error.response.data.msg;\n      return thunkAPI.rejectWithValue(message);\n    }\n  }\n}); //method untuk fungsi logout\n\nexport const LogOut = createAsyncThunk(\"user/LogOut\", async () => {\n  await axios.delete(\"http://localhost:5000/LogOut\");\n});\nexport const authSlice = createSlice({\n  name: \"auth\",\n  initialState,\n  reducers: {\n    reset: state => initialState\n  },\n  extraReducers: builder => {\n    builder.addCase(LoginUser.pending, state => {\n      state.isLoading = true;\n    });\n    builder.addCase(LoginUser.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.isSuccess = true;\n      state.user = action.payload;\n    }); // when error\n\n    builder.addCase(LoginUser.rejected, (state, action) => {\n      state.isLoading = false;\n      state.isError = true;\n      state.message = action.payload;\n    }); // get user login\n\n    builder.addCase(getMe.pending, state => {\n      state.isLoading = true;\n    });\n    builder.addCase(getMe.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.isSuccess = true;\n      state.user = action.payload;\n    }); // when error\n\n    builder.addCase(getMe.rejected, (state, action) => {\n      state.isLoading = false;\n      state.isError = true;\n      state.message = action.payload;\n    });\n  }\n}); //export function sebagai action\n\nexport const {\n  reset\n} = authSlice.actions;\nexport default authSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","initialState","user","isError","isSuccess","isLoading","message","LoginUser","thunkAPI","response","post","email","username","password","data","error","msg","rejectWithValue","getMe","_","get","LogOut","delete","authSlice","name","reducers","reset","state","extraReducers","builder","addCase","pending","fulfilled","action","payload","rejected","actions","reducer"],"sources":["C:/xampp/htdocs/izinbps/client/src/features/authSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport axios from \"axios\";\r\n\r\nconst initialState = {\r\n  user: null,\r\n  isError: false,\r\n  isSuccess: false,\r\n  isLoading: false,\r\n  message: \"\",\r\n};\r\n\r\n//request ke api\r\nexport const LoginUser = createAsyncThunk(\"user/loginUser\", async (user, thunkAPI) => {\r\n  try {\r\n    const response = await axios.post(\"http://localhost:5000/login\", {\r\n      email: user.username,\r\n      password: user.password,\r\n    });\r\n    return response.data;\r\n  } catch (error) {\r\n    if (error.response) {\r\n      const message = error.response.data.msg;\r\n      return thunkAPI.rejectWithValue(message);\r\n    }\r\n  }\r\n});\r\n\r\n// method untuk fungsi getme\r\nexport const getMe = createAsyncThunk(\"user/getMe\", async (_, thunkAPI) => {\r\n  try {\r\n    const response = await axios.get(\"http://localhost:5000/me\");\r\n    return response.data;\r\n  } catch (error) {\r\n    if (error.response) {\r\n      const message = error.response.data.msg;\r\n      return thunkAPI.rejectWithValue(message);\r\n    }\r\n  }\r\n});\r\n\r\n//method untuk fungsi logout\r\nexport const LogOut = createAsyncThunk(\"user/LogOut\", async () => {\r\n  await axios.delete(\"http://localhost:5000/LogOut\");\r\n});\r\n\r\nexport const authSlice = createSlice({\r\n  name: \"auth\",\r\n  initialState,\r\n  reducers: {\r\n    reset: (state) => initialState,\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder.addCase(LoginUser.pending, (state) => {\r\n      state.isLoading = true;\r\n    });\r\n    builder.addCase(LoginUser.fulfilled, (state, action) => {\r\n      state.isLoading = false;\r\n      state.isSuccess = true;\r\n      state.user = action.payload;\r\n    });\r\n    // when error\r\n    builder.addCase(LoginUser.rejected, (state, action) => {\r\n      state.isLoading = false;\r\n      state.isError = true;\r\n      state.message = action.payload;\r\n    });\r\n\r\n    // get user login\r\n    builder.addCase(getMe.pending, (state) => {\r\n      state.isLoading = true;\r\n    });\r\n    builder.addCase(getMe.fulfilled, (state, action) => {\r\n      state.isLoading = false;\r\n      state.isSuccess = true;\r\n      state.user = action.payload;\r\n    });\r\n    // when error\r\n    builder.addCase(getMe.rejected, (state, action) => {\r\n      state.isLoading = false;\r\n      state.isError = true;\r\n      state.message = action.payload;\r\n    });\r\n  },\r\n});\r\n\r\n//export function sebagai action\r\nexport const { reset } = authSlice.actions;\r\nexport default authSlice.reducer;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}